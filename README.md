# 2D Scalar and Vector Field Visualization Techniques

## Dataset
We are given the INCOIS dataset of the Indian Ocean containing data on the following ocean variables, across longitudes and latitudes in the Indian Ocean Region, from December 2003 - December 2005:
- Sea Surface Salinity (sss)
- Sea Surface Temperature (sst)
- Sea Surface Height Anomaly (ssha)
- Zonal Current Speed (x-component of current)
- Meridional Current Speed (y-component of current)

## Installations 
The application requires the following libraries to be installed:
- animation: Used for making the movie animation of the plots at diffrent timesteps
- basemap: Used for plotting the contour fill and quiver plot on the geographical map
- streamlit: Used for the web app interface for the viewing the visualizations

## Directory tree
The code is written assuming the following relative structure of the folders:
- The data folder is just outside the source code folder

- The `Visualisations` folder consist of output of each of the scripts: `scalar_field_viz.py` and `vector_field_viz.py`. It is also just outside the source code folder

- The `Visualisations` folder contains two folders inside it: `scalar` and `vector`

## Source Code
All the source code files lie in the `src` folder of the application. The following details the purpose of all these files:
- `run_app.sh`: Shell script to install all the required packages and start the web app

- `app.py`: Holds the source code for rendering the plots on the web app. When the app is run, it stores all the animations rendered on the app screen to the respective subfolder of the `Visualisations` folder.  

- `animate.py`: This module has all the methods for creating the animation that is to be rendered on the web app. This module calls certain plotting functions from the `scalar_field_viz.py` and the `vector_field_viz.py` modules.

- `scalar_field_viz.py`: Independent script and module to plot scalar fields

- `vector_field_viz.py`: Independent script and module to plot vector fields

## To run the Streamlit Web Application
The web app can be started by using the following commands on the Linux Terminal (assuming the current directory is the assignment directory):

```
$ cd src
$ chmod a+x run_app.sh
$ ./run_app.sh
```

The above commands will install all the dependencies required to run the project and start the web app on port 8501. 

The following is a screenshot of the application:

![App Starting Screen](./Screenshot%20from%202022-09-14%2015-54-30.png)


![App Opened Menu](./Screenshot%20from%202022-09-14%2015-54-49.png)

## Scalar Field Visualization

**Source File: src/scalar_field_viz.py**

This file is an independent python script as well as a module which reads data on the required variable from the dataset and plots it on a map with latitudes and longitudes mentioned in the earlier section. The script when executed generates and stores the following in `Visualisations/scalar`:
- Video of the plot at different timesteps starting in Dec'03 
- Images of plots from Nov'04 - Jan'04 as well as Dec'03 and Dec'05 

The following is the command on how to execute the code:

```
$ python3 scalar_field_viz <variable_name>
```

The `variable_name` can take one of the following values:
- `sss`: Generates plots for Sea Surface Salinity
- `sst`: Generates plots for Sea Surface Temperature
- `ssha`: Generate plots for Sea Surface Height Anomaly

For example, upon entering the following command, we get plots on the sea surface height anomaly:

```
$ python3 src/scalar_field_viz ssha
```

### Image Annotations
The images are stored with the filename in the format `DATE_<variable>.png`. For example, the plot of sea surface salinity on 9th of December, 2004 would be stored as an image with name `"09-DEC-2004"_sss.png` in the `Visualisations/scalar` directory. 

The following are some images generated by the script:

![Jan 28, 2004: Sea Surface Salinity](./Visualisations/scalar/%2228-JAN-2005%22_sss.png)

![Dec 19, 2004: Sea Surface Temperature](./Visualisations/scalar/%2219-DEC-2004%22_sst.png)

![Jan 8, 2005: Sea Surface Height Anomaly](./Visualisations/scalar/%2208-JAN-2005%22_ssha.png)

### Video Annotations
The videos are stored with the filename in the format `<underscore_separated_full_form_of_the_variable>.mp4`. For example, the video on the plot animation of Sea Surface Salinity would be stored as `sea_surface_salinity.mp4` in the `Visualisations/scalar` directory.

The following video is generated by the script:
![Sea Surface Temperature Animation](./Visualisations/sea_surface_temperature.gif)

## Vector Field Visualisation

**Source File: src/vector_field_viz.py**

This file is an independent python script as well as a module which reads data on zonal currents and meridional currents from the dataset and plots it in the form of a vector field on a map with latitudes and longitudes mentioned in the earlier section. This is a 2D vector field with the following components: 
- zonal-current (x-component)
- meridional-current (y-component)

While storing the values as a grid, both of these component values are multiplied to -1 so that the directions are same as the Cartesian X and Y axes. This vector field is plotted as quiver plot.

Additionally, the script also calculates the magnitude of the current vector if required. The magnitude field is plotted as a contour fill plot. 

The script when executed generates and stores the following in `Visualisations/scalar`:
- Video of the plot at different timesteps starting in Dec'03 
- Images of plots from Nov'04 - Jan'04 as well as Dec'03 and Dec'05 

The following is the command on how to execute the code:

```
$ python3 src/scalar_field_viz <quiver/magnitude>
```

The `quiver/magnitude` can take one of the following values:
- `q`: Generates the quiver plot for the 2D vector field
- `m`: Generates the magnitude contour fill plot for the 2D vector field
- `both`: Generates the plot containing both the magnitude and the arrows

For example, upon entering the following command, we get the quiver plot of the 2D vector field of currents:

```
$ python3 src/vector_field_viz q
```

### Image Annotations
The images are stored with the filename in the format `DATE_<vec/mag>.png`. Here, `quiver` is used for quiver plots, while `magnitude` is used for magnitude plots and `both` is used for combined plots. 

For example, the quiver plot of the current on 9th of December, 2004 would be stored as an image with name `"09-DEC-2004"_quiver.png` in the `Visualisations/vector` directory. 

The following are some images generated by the script:

![Nov 24, 2004: Quiver](./Visualisations/vector/%2224-NOV-2004%22_quiver.png)


![Nov 24, 2004: Magnitude](./Visualisations/vector/%2224-NOV-2004%22_magnitude.png)


![Nov 24, 2004: Magnitude + Quiver](./Visualisations/vector/%2224-NOV-2004%22_both.png)

### Video Annotations
The videos are stored with the filename as follows in the `Visualisations/scalar` directory:
- Magnitude Visualization of the vector field using contour fill: `zonal_meridian_magnitude_currents.mp4`
- 2D Vector Field Visualization using quiver plot: `zonal_meridian_quiver_currents.mp4`
- 2D Vector Field Visualization using quiver plot: `zonal_meridian_both_currents.mp4`

The following are the videos generated by the script:

![Currents Animation](./Visualisations/vector/zonal_meridian_both_currents.gif)
